<div class="container mt-4" id="mainContainer">
    <h2>Client Connected Projects</h2>
    
    <div class="mb-3">
        <button class="btn btn-primary" 
                hx-get="{{ url_for('client_projects.form') }}"
                hx-target="#projectFormContainer"
                hx-swap="innerHTML">
            Add New Project
        </button>
    </div>

    <!-- Form container for HTMX to load the form into -->
    <div id="projectFormContainer"></div>

    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Status</th>
                    <th>Teacher</th>
                    <th>District</th>
                    <th>Organization</th>
                    <th>Primary Contacts</th>
                    <th>Project</th>
                    <th>Dates</th>
                    <th>Students</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for project in projects %}
                <tr>
                    <td>{{ project.status }}</td>
                    <td>{{ project.teacher }}</td>
                    <td>{{ project.district }}</td>
                    <td>{{ project.organization }}</td>
                    <td>
                        {% for contact in project.primary_contacts %}
                        <div>{{ contact.name }} ({{ contact.hours }} hours)</div>
                        {% endfor %}
                    </td>
                    <td>
                        <strong>{{ project.project_title }}</strong><br>
                        {{ project.project_description }}
                    </td>
                    <td>{{ project.project_dates }}</td>
                    <td>{{ project.number_of_students }}</td>
                    <td>
                        <button class="btn btn-sm btn-primary"
                                hx-get="{{ url_for('client_projects.edit_form', project_id=project.id) }}"
                                hx-target="#projectFormContainer"
                                hx-swap="innerHTML">
                            Edit
                        </button>
                        <button class="btn btn-sm btn-danger"
                                hx-delete="{{ url_for('client_projects.delete', project_id=project.id) }}"
                                hx-confirm="Are you sure you want to delete this project?"
                                hx-target="closest tr"
                                hx-swap="outerHTML">
                            Delete
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div> 